- Logging
  - Write logs to shared memory
  - Another process may save the logs or forward to another machine
  - If logs are not saved, they're discarded
  - Protected via seqlocks
- Investigate concurrency kit
  - seqlocks (for logging) already available
  - rwlocks are smaller than pthread's
- Use RCU (liburcu?) instead of rwlocks
- Support for SSL sockets
- Support for some kind of scripting language
  - FCGI support?
  - Use libtcc?
  - LuaJIT?
- VirtualHost
- Multiple listeners
- IPv6
- Other protocols, such as SPDY
- Server-sent-events
  - https://en.wikipedia.org/wiki/Server-sent_events
  - To be able to implement http://socket.io
- Chunked encoding support
- Compression for files larger than 16KiB
  - Still support sendfile(), possibly compressing to a temporary directory
- Make Date headers part of normal response headers
  - Currently only inside file serving
- Cookie support
- HTTP authorization support
  - Mechanism is working for Basic auth; need a way to store username/passwords
- Run a new lwan version without restarting
  - Set TCP_REUSEPORT on main socket of old server
  - Start new server
  - Tell old server to close main socket
  - Tell old server to quit when all connections are closed
- Create epoll() implementation for FreeBSD (based on kqueue) or see if
  libevent/libev are worth trying
- Port to OSv (http://osv.info)
- Status screen (uptime, number of connections, keep-alive connections,
  memory usage, etc)
- Investigate stackless coroutine implementations, like Simon Tatham's?
- dup() vs openat()
  - Keep popular files open, and use dup() instead of openat() to serve them
- Investigate TCP_DEFER_ACCEPT and TCP_QUICKACK flags
- Win the C10M challenge
- Use list.h more
  - Coroutine?
  - Hash table?
- Postprocess compiled template so that IF and ITER chunks points
  directly to the actual END chunks
- JIT-compile the templates
- Tune SQLite usage for Freegeoip sample app:
  - Open one connection per thread, set MULTITHREADED mode
  - Disable locking, journal
  - Set MMAP sizes to database size
     - or -
  - Write a custom on-disk trie to lookup IP addresses
